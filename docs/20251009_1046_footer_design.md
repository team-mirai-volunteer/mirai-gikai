# スマートフォン向けフッター実装計画

## 1. 目的とスコープ
- web フロントエンドにスマホ最適化済みの共通フッターを導入し、既存のソーシャルリンク表示を統合する。
- MCP（Mirai Control Panel）で指定されている掲載要素・導線・ブランド表現を満たすコードベースを用意する。

## 2. 現状調査（Step 1）
- ソーシャル導線は `web/src/components/share/` 配下のシェアボタンのみで提供されている。
  - `web/src/features/bills/components/share/bill-share-buttons.tsx` で X / Facebook ボタンが議案詳細ページに出力される。
  - `web/src/components/share/share-twitter-button.tsx` は X 共有モーダル起動用の `Button` ラッパー。
  - `web/src/components/share/share-facebook-button.tsx` は `Facebook` アイコンを含む共有ボタン。
- 既存フッターコンポーネントは存在せず、ページ共通の `footer` 要素は未定義。
- これらのボタンは `variant="outline" size="sm"` の小型ボタンスタイルで、スマホ向けの常設導線としては再利用が難しいため、新規 UI を設計する。

## 3. 抽出方針（Step 2）
- 新規ファイル: `web/src/components/layouts/footer/footer.tsx`
  - 役割: 共通フッターの JSX を保持し、他ページから呼び出せるようにする。
  - 構造: `<footer>` 直下に `FooterLogoSection`, `FooterNavSection`, `FooterSocialSection`, `FooterLegalSection` を分割した内部コンポーネントを定義。
- 既存レイアウト統合: `web/src/app/layout.tsx` で `<Footer />` を読み込み、全ページに適用する。
- Tailwind クラス: 余白は `px-6 py-10`, スマホで縦並び、`md:` 以降横並びになるグリッドを設定予定。抽出時に既存クラスを転記し、共通化できる箇所のみ調整する。

## 4. 要件着地（Step 3）
- MCP 要求項目を整理し、以下の常設セクションをコード化する。
  - ブランド情報: ロゴ（`public/img/logo.svg`）、コピーライト、簡単なミッション文。
  - サイト内リンク: `About`, `Bills`, `Contact` 等の主要導線。配列定義 `const primaryLinks: FooterLink[]` を `footer.tsx` に持たせる。
  - 外部リンク: ソーシャル（X, Facebook, YouTube など）。`FooterSocialLink` 型を定義し、アイコンコンポーネントとのマッピングを行う。
  - 法的情報: プライバシーポリシー、利用規約、運営会社表記。リンク先は MCP 情報で決定。
- 文言・URL は `web/src/lib/config/footer-links.ts` のような設定ファイルに切り出すか、ハードコードするかを決める（初期実装はインラインで、将来設定ファイル化を検討）。

## 5. デザイン参照（Step 4）
- `https://team-mir.ai/` および ActionBoard のフッターを確認し、以下をコード仕様に反映。
  - ソーシャルアイコンは円形ボタン（44px角）で、アイコンは中央揃え。
  - サムネイル／ロゴは SVG ベースで描画（現状アセットを再利用）。
  - 背景配色とテキストコントラスト（ブランドカラー #0F172A ベースを踏襲する想定）。
- 必要に応じて `web/public/icons/` に SVG を追加し、`next/image` ではなく `<Image>` / `<svg>` どちらで扱うか決める。

## 6. 実装詳細（Step 5）
- ディレクトリ構成
  - `web/src/components/layouts/footer/footer.tsx`: `Footer` 本体と内部セクション。
  - `web/src/components/layouts/footer/footer.types.ts`: `FooterLink`, `FooterSocialLink`, `FooterPolicyLink` の型定義。
  - `web/src/components/layouts/footer/footer.config.ts`: リンク・ソーシャル・ポリシーの配列定義（当面は静的値）。
  - `web/src/components/layouts/footer/footer.stories.tsx`（任意）: Storybook でレスポンシブ確認用。
- Tailwind レイアウト
  - ルート `<footer>` は `bg-slate-950 text-slate-100`。スマホでは `flex-col`, `md:` 以降 `grid grid-cols-[2fr_1fr_1fr]` に切り替え。
  - `.mx-auto max-w-6xl px-6 py-10` をベースに、`sm:px-4` で余白を縮める。
- `Footer` 実装スケッチ
  ```tsx
  import {
    primaryLinks,
    socialLinks,
    policyLinks,
  } from "./footer.config";

  export function Footer() {
    return (
      <footer className="bg-slate-950 text-slate-100">
        <div className="mx-auto flex w-full max-w-6xl flex-col gap-10 px-6 py-10 md:grid md:grid-cols-[1.5fr_1fr_1fr] md:gap-12">
          <FooterLogoSection />
          <FooterNavSection title="サービス" links={primaryLinks} />
          <FooterSocialSection socials={socialLinks} />
        </div>
        <FooterLegalSection policies={policyLinks} />
      </footer>
    );
  }
  ```
- `FooterLogoSection`
  - `next/link` と `next/image` で `public/img/logo.svg` を表示。
  - `<p className="mt-4 text-sm leading-relaxed text-slate-300">` に MCP のブランド文言を挿入。
  - Action Board のヒーロー文言のように 2 行組みで改行を明示し、狭い画面でも可読性を確保する [[Action Board footer](https://github.com/team-mirai-volunteer/action-board)].
- `FooterNavSection`
  - Props: `{ title: string; links: FooterLink[] }`。
  - `<nav>` + `<ul className="grid grid-cols-2 gap-3 text-sm">` をスマホ用に採用、`md:` で 1 列に戻す。
  - `FooterLink` は `{ label: string; href: string; external?: boolean }`。
  - 外部リンクは `target="_blank" rel="noreferrer"` を付与し、アクセシビリティラベルも設定。
- `FooterSocialSection`
  - `FooterSocialLink` 型: `{ name: "X" | "Facebook" | "YouTube" | "Instagram"; href: string; icon: LucideIcon | React.FC<SVGProps> }`。
  - `socialLinks` 配列例:
    ```ts
    export const socialLinks: FooterSocialLink[] = [
      { name: "X", href: "https://x.com/team_mirai", icon: Icons.x },
      { name: "Facebook", href: "https://www.facebook.com/teammirai", icon: Facebook },
    ];
    ```
  - Tailwind: 丸型ボタン `className="flex h-11 w-11 items-center justify-center rounded-full bg-slate-800 text-slate-100 hover:bg-slate-700"`。
  - Action Board で採用されているソーシャルサークル UI を参考に、ホバー時のトランジション `transition-colors` を追加 [[Action Board footer](https://github.com/team-mirai-volunteer/action-board)].
- `FooterLegalSection`
  - `policyLinks` を `flex flex-col gap-2 border-t border-slate-800 px-6 py-6 text-xs text-slate-400` で描画。
  - コピーライトは `© {new Date().getFullYear()} Team Mirai` をテンプレートリテラルで生成。
  - ポリシーリンクは `policyLinks.map` で `Link` or `anchor` を横並び（`md:flex-row`）。
- 共有スタイル/ユーティリティ
  - `clsx`/`cn` を使い、外部からの `className` 追加に備える。
  - フォーカスリング: `focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white`。
- Storybook / テスト（任意）
  - `Footer.stories.tsx` に viewport 変種（iPhone SE, iPhone 14 Pro）を設定。
  - Jest で `Footer` をレンダリングし、リンク数・aria-label をスナップショット確認。

## 7. 動作確認と導入（Step 6）
- `web/src/app/layout.tsx` へ `<Footer />` を追加し、トップページ / 議案詳細ページでの描画を確認。
- DevTools のデバイスエミュレーションでモバイル表示を確認（余白・タップ領域・可読性）。
- ダークモード有無を既存設計と合わせ、必要な場合は `bg-background` / `text-foreground` の切替ロジックを追加検討。
- 必要に応じて `Footer` の Storybook ストーリーを作成し、レスポンシブ表示をスナップショット化する。

## 8. 現状ソース一覧（Step 1 調査結果）
- `web/src/features/bills/components/share/bill-share-buttons.tsx`
  - 議案詳細ページで利用されるシェアボタン群。X / Facebook ボタンを含む。
- `web/src/components/share/share-twitter-button.tsx`
  - `Button` コンポーネントを用いた X 共有ボタン。`variant="outline" size="sm"` のフラットスタイル。
- `web/src/components/share/share-facebook-button.tsx`
  - `lucide-react` の `Facebook` アイコンを用いた共有ボタン。同じく `Button` で実装。
- 関連ファイル（LINE / URL / ネイティブ共有）は同ディレクトリに存在し、スタイル統一の参照元になる。
- 既存フッターは定義されておらず、ソーシャル導線は上記シェアボタンのみ。

## 9. 成果物
- 共通フッターコンポーネント `web/src/components/layouts/footer/footer.tsx`。
- 必要に応じた補助ファイル（例: `web/src/lib/config/footer.ts`、アイコン SVG、Storybook ストーリー）。
- ドキュメント更新（このファイル + README のフッター仕様セクション）。

